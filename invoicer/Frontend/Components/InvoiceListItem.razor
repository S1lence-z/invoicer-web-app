@using Domain.Models;

<div class="card border-1 shadow-sm">
    <div class="card-body d-flex justify-content-between" style="cursor: pointer;">
        <span class="fw-bold">@Invoice.InvoiceNumber</span>

        <span class="text-muted">@Invoice.Buyer!.Name</span>

        <span class="text-muted">@Invoice.Seller!.Name</span>

        <span class="text-muted">@Invoice.DueDate.ToString("d")</span>
        <span class="fw-bold">
            @CalculateInvoiceSum(Invoice) @Invoice.Currency
        </span>
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public Invoice Invoice { get; set; } = null!;

    private decimal CalculateInvoiceSum(Invoice invoice) 
    {
        decimal total = 0;
        foreach (var item in invoice.Items) 
        {
            decimal itemTotal = item.Quantity * item.UnitPrice;
            total += itemTotal;
        }
        return total;
    }
}
